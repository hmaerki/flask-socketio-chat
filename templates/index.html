<html>
<head>
<title>Chat Room</title>
<script
  src="//cdnjs.cloudflare.com/ajax/libs/socket.io/2.2.0/socket.io.js"
  integrity="sha256-yr4fRk/GU1ehYJPAs8P4JlTgu0Hdsp4ZKrx8bDEDC3I="
  crossorigin="anonymous"></script>

<script
  src="http://code.jquery.com/jquery-2.2.4.js"
  integrity="sha256-iT6Q9iMJYuQiMWNd9lDyBUStIq/8PuOW33aOqmvFpqI="
  crossorigin="anonymous"></script>
  
<script src="https://cdn.jsdelivr.net/npm/@svgdotjs/svg.js@3.0/dist/svg.min.js"></script>

</head>
<body>
  <script type="text/javascript">
$(document).ready(function() {
	var socket = io.connect('http://' + document.domain + ':' + location.port);

  socket.on('connect', function() {
    socket.send('User has connected!');
  });

  socket.on('message', function(msg) {
    console.log('Received: ' + msg);
    var i = msg.indexOf(':');
    var method = msg.slice(0, i)
    var text = msg.slice(i+1)
    if (method == 'MESSAGE') {
        $("#messages").append('<li>'+text+'</li>');

      if (text.startsWith('#')) {


        // get elements in group
        // var elements = $('#svg_board g.my-group .my-element').each(function() {
        //   this.instance.animate().fill(text)
        // })  
      }
    }
    if (method == 'TIME') {
        $("#time").html(text);
    }
    // if (msg.startsWith('MESSAGE:')) {
    //     $("#messages").append('<li>'+msg+'</li>');
    // }
    // if (msg.startsWith('TIME:')) {
    //     $("#time").html(msg);
    // }

  });

  $('#sendbutton').on('click', function() {
    socket.send($('#myMessage').val());
    $('#myMessage').val('');

  });

});

</script>
<ul id="messages"></ul>
<input type="text" id="myMessage">
<button id="sendbutton">Send</button>
<p id="time">The time</p>
<!-- https://www.w3schools.com/graphics/svg_examples.asp -->
<!-- https://svgjs.com/docs/3.0/ -->
<id id="svg_board" height="180" width="500"/>

<!--
  <svg id="svg_board" height="180" width="500">
    <g>
  <circle id="circle" cx="80" cy="80" r="10" stroke="black" stroke-width="3" fill="red" />
  <polyline points="0,40 40,40 40,80 80,80 80,120 120,120 120,160" style="fill:white;stroke:red;stroke-width:4" />
    </g>
  Sorry, your browser does not support inline SVG.
  </svg>

-->
<script type="text/javascript">
  // add elements
  var draw   = SVG().addTo('#svg_board')
  var group  = draw.group().addClass('my-group')
  var rect   = group.rect({id:122, width:100, height:100}).addClass('my-element')
  var rect   = group.rect({id:123, width:100, height:100}).addClass('my-element')
  var circle = group.circle(100).addClass('my-element').move(100, 100)

  // get elements in group
  var elements = $('#svg_board svg g.my-group .my-element').each(function() {
      this.instance.animate().fill('#00f')
  })

  var elements = $('#svg_board g.my-group #123').each(function() {
    this.instance.animate().fill('#f00')
  })
</script>
</body>
</html>